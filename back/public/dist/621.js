"use strict";(self.webpackChunkblooways_front=self.webpackChunkblooways_front||[]).push([[621],{47621:function(e,t,n){n.r(t),n.d(t,{default:function(){return Se}});var a=n(89540),r=n(53380),l=n(52861),o=n(67294),i=n(16550),c=n(8100),s=n(87536),u=n(96042),m=n(11749);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d.apply(this,arguments)}var f=function(e){var t=e.show,n=e.onCloseModal,f=e.setShowAddAreaModal,b=(0,i.UO)().blooway,p=(0,c.ZP)("/api/users",r.Z).data,v=(0,c.ZP)(p?"/api/blooways/".concat(b,"/areas"):null,r.Z).mutate,y=(0,s.cI)(),h=y.register,g=y.handleSubmit,x=y.setValue,w=y.formState.isSubmitting,E=(0,o.useCallback)((function(e){var t=e.areaName;return t&&t.trim()?t.length>14?u.Am.error("14자 이내의 에리어 이름을 입력해주세요.",m.Dd):void l.Z.post("/api/blooways/".concat(b,"/areas"),{name:t}).then((function(){x("areaName",""),v(),f(!1),u.Am.success("에리어 ".concat(t,"를 생성했습니다."),m.Dd)})).catch((function(e){var t;console.dir(e),u.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,m.Dd)})):u.Am.error("에리어 이름을 입력해주세요.",m.Dd)}),[f,b,v,x]);return o.createElement(a.Z,{modalType:0,modalTitle:"새로운 에리어 추가하기",show:t,onCloseModal:n},o.createElement("form",{id:"add-area-modal",className:"w-full",onSubmit:g(E)},o.createElement("div",{className:"w-full my-4"},o.createElement("span",null,"에리어 이름"),o.createElement("input",d({id:"areaName",type:"text",className:"mt-2 relative block w-full appearance-none rounded-md  border border-slate-300 px-3 py-2 text-slate-800 placeholder-slate-400 focus:z-10 focus:border-amber-500 focus:outline-none focus:ring-amber-500 sm:text-sm",placeholder:"2-14자 이내로 설정해주세요"},h("areaName",{minLength:2})))),o.createElement("div",{className:"flex justify-center"},o.createElement("button",{disabled:w,type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 focus-visible:ring-offset-2"},"생성하기"))))};function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},b.apply(this,arguments)}var p=function(e){var t=e.show,n=e.onCloseModal,d=e.setShowInviteBloowayModal,f=(0,i.UO)().blooway,p=(0,c.ZP)("/api/users",r.Z).data,v=(0,c.ZP)(p?"/api/blooways/".concat(f,"/members"):null,r.Z).mutate,y=(0,s.cI)(),h=y.register,g=y.handleSubmit,x=y.formState,w=x.isSubmitting,E=x.errors,N=(0,o.useCallback)((function(e){var t=e.memberEmail;if(!t||!t.trim())return u.Am.error("초대할 멤버의 이메일을 입력해주세요",m.Dd);l.Z.post("/api/blooways/".concat(f,"/members"),{email:t}).then((function(){v(),d(!1),u.Am.success("".concat(t,"님을 ").concat(f," 블루웨이에 초대했습니다."),m.Dd)})).catch((function(e){var t;console.dir(e),u.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,m.Dd)}))}),[f,v,d]);return o.createElement(a.Z,{modalType:0,modalTitle:"블루웨이에 멤버 초대하기",show:t,onCloseModal:n},o.createElement("form",{id:"invite-blooway-modal",className:"w-full",onSubmit:g(N)},o.createElement("div",{className:"w-full my-4"},o.createElement("span",null,"멤버 이메일"),o.createElement("input",b({id:"memberEmail",type:"text",className:"mt-2 relative block w-full appearance-none rounded-md  border border-slate-300 px-3 py-2 text-slate-800 placeholder-slate-400 focus:z-10 focus:border-amber-500 focus:outline-none focus:ring-amber-500 sm:text-sm",placeholder:"이메일 주소"},h("memberEmail",{maxLength:100,pattern:{value:/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i,message:"이메일 형식에 맞지 않습니다"}})))),o.createElement("div",{className:"flex justify-center flex-col"},o.createElement("span",{className:"text-xs mx-auto text-amber-500 mb-3"},E.memberEmail&&E.memberEmail.message),o.createElement("button",{disabled:w,type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 focus-visible:ring-offset-2"},"초대하기"))))},v=n(24694),y=n(73727),h=n(63992),g={},x=function(e){var t=(0,o.useCallback)((function(){e&&g[e]&&(g[e].disconnect(),delete g[e])}),[e]);return e?(g[e]||(g[e]=(0,h.io)("".concat(m.TA,"/bw-").concat(e),{transports:["websocket"]}),g[e].on("connect_error",(function(e){console.error(e),console.log("connect_error due to ".concat(e.message))}))),[g[e],t]):[void 0,t]};function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var E=function(e){var t,n,a=(t=(0,o.useState)(e),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=a[0],l=a[1];return[r,(0,o.useCallback)((function(e){l(e.target.value)}),[]),l]},N=n(27484),S=n.n(N);function A(e){var t={};return e.forEach((function(e){var n=S()(e.createdAt).format("YYYY-MM-DD");Array.isArray(t[n])?t[n].push(e):t[n]=[e]})),t}var k=n(44593);function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Z.apply(this,arguments)}var j,C=function(e){var t=e.show,n=e.onCloseModal,d=e.setShowInviteAreaModal,f=(0,i.UO)(),b=f.blooway,p=f.area,v=(0,c.ZP)("/api/users",r.Z).data,y=(0,c.ZP)(v?"/api/blooways/".concat(b,"/areas/").concat(p,"/members"):null,r.Z).mutate,h=(0,s.cI)(),g=h.register,x=h.handleSubmit,w=h.setValue,E=h.formState,N=E.isSubmitting,S=E.errors,A=(0,o.useCallback)((function(e){var t=e.memberEmail;if(!t||!t.trim())return u.Am.error("초대할 멤버의 이메일을 입력해주세요",m.Dd);l.Z.post("/api/blooways/".concat(b,"/areas/").concat(p,"/members"),{email:t}).then((function(){w("memberEmail",""),y(),d(!1),u.Am.success("".concat(t,"님을 ").concat(p," 에리어에 초대했습니다."),m.Dd)})).catch((function(e){var t;console.dir(e),u.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,m.Dd)}))}),[p,y,d,b,w]);return o.createElement(a.Z,{modalType:0,modalTitle:"".concat(p," 에리어에 멤버 초대하기"),show:t,onCloseModal:n},o.createElement("form",{id:"invite-area-modal",className:"w-full",onSubmit:x(A)},o.createElement("div",{className:"w-full my-4"},o.createElement("span",null,"멤버 이메일"),o.createElement("input",Z({id:"memberEmail",type:"text",className:"mt-2 relative block w-full appearance-none rounded-md  border border-slate-300 px-3 py-2 text-slate-800 placeholder-slate-400 focus:z-10 focus:border-amber-500 focus:outline-none focus:ring-amber-500 sm:text-sm",placeholder:"이메일 주소"},g("memberEmail",{maxLength:100,pattern:{value:/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i,message:"이메일 형식에 맞지 않습니다"}})))),o.createElement("div",{className:"flex justify-center flex-col"},o.createElement("span",{className:"text-xs mx-auto text-amber-500 mb-3"},S.memberEmail&&S.memberEmail.message),o.createElement("button",{disabled:N,type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 focus-visible:ring-offset-2"},"초대하기"))))},O=n(57692),I=n(7219),T=n(23675),D=n(62736),P=n(85802);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var M,U,B=(0,n(12788).ZP)(P.r)(j||(M=["\n  padding: 10px;\n\n  & textarea {\n    height: 80px;\n    padding: 9px 10px !important;\n    outline: none !important;\n    border-top-left-radius: 10px !important;\n    border-top-right-radius: 10px !important;\n    resize: none !important;\n    line-height: 22px;\n    border: none;\n    ::placeholder {\n      color: #b4b4b4;\n      font-size: 14px;\n    }\n    &:focus {\n      border-color: #cccccc;\n      -webkit-box-shadow: none;\n      box-shadow: none;\n    }\n  }\n"],U||(U=M.slice(0)),j=Object.freeze(Object.defineProperties(M,{raw:{value:Object.freeze(U)}})))),L=function(e){var t,n,a=e.onSubmitForm,r=e.talk,l=e.onChangeTalk,i=e.placeholder,c=e.data,s=e.inPage,u=e.onImageUpload,m=(t=(0,o.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=m[0],f=m[1],b=(0,o.useCallback)((function(e){"Enter"===e.key&&(e.shiftKey||(e.preventDefault(),a(e)))}),[a]),p=(0,o.useCallback)((function(e,t,n,a,r){return c?o.createElement("button",{className:"".concat(r&&"bg-amber-500 text-white"," gap-1 text-xs rounded-md px-1 relative bottom-1 py-1 flex border-none items-center w-full")},o.createElement(D.Z,{size:18,style:"shape",value:c[a].email}),o.createElement("span",null,n)):null}),[c]),v=(0,o.useCallback)((function(){f(!0)}),[]),y=(0,o.useCallback)((function(){f(!1)}),[]);return o.createElement("div",{id:"talk-form",className:"pb-5 w-full flex pt-0"},o.createElement("form",{onSubmit:a,className:"w-full border rounded-lg"},o.createElement(B,{id:"talk",value:r,onChange:l,onKeyPress:b,placeholder:i,wrap:"hard",forceSuggestionsAboveCursor:!0,className:"h-20 text-sm md:text-base"},o.createElement(P.p,{appendSpaceOnAdd:!0,trigger:"@",data:(null==c?void 0:c.map((function(e){return{id:e.id,display:e.username}})))||[],renderSuggestion:p})),o.createElement("div",{className:"flex justify-between relative items-center px-2 h-9 bg-slate-100"},o.createElement("div",{className:"flex items-center"},o.createElement("label",{htmlFor:"imageUpload",className:"cursor-pointer hover:text-amber-500 flex h-9 w-9 items-center justify-center rounded-lg"},o.createElement(O.Z,{className:"h-6 w-6","aria-hidden":"true"})),o.createElement("input",{id:"imageUpload",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:u}),"area"===s&&o.createElement("button",{type:"button",onClick:v,className:"flex justify-center items-center p-1 rounded-md duration-200"},o.createElement(I.Z,{className:"text-slate-800 hover:text-amber-500 w-5"})),"private"===s&&o.createElement("div",{className:"flex justify-center items-center p-1 text-slate-800 rounded-md duration-200"})),o.createElement("button",{type:"submit",className:"".concat((null==r?void 0:r.trim())&&"bg-amber-500 shadow "," flex justify-center items-center p-1 rounded-md  duration-200")},o.createElement(T.Z,{className:"".concat(null!=r&&r.trim()?"hover:scale-105 text-white":"text-slate-300","  w-5 ")})))),"area"===s&&o.createElement(C,{show:d,onCloseModal:y,setShowInviteAreaModal:f}))},F=n(38817);function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var _=(0,o.memo)((function(e){var t,n,a=e.data,r=(t=(0,o.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=r[0],c=r[1],s=(0,i.UO)().blooway,u="Sender"in a?a.Sender:a.User,m=(0,o.useMemo)((function(){return a.content.startsWith("uploads\\")||a.content.startsWith("uploads/")||a.content.startsWith("https://bloowaysbucket")?o.createElement("img",{id:"image",src:"".concat(a.content),className:"max-h-52 rounded-md"}):(0,F.Z)({pattern:/@\[(.+?)]\((\d+?)\)|\n/g,decorator:function(e,t){var n=e.match(/@\[(.+?)]\((\d+?)\)/);return n?o.createElement(y.rU,{key:e+t,to:"/blooway/".concat(s,"/private/").concat(n[2])},o.createElement("span",{className:"text-amber-500 font-semibold hover:text-amber-600"},"@",n[1])):o.createElement("br",{key:t})},input:a.content})}),[s,a.content]),d=(0,o.useCallback)((function(e){"image"===e.target.id&&c(!0)}),[]),f=(0,o.useCallback)((function(){c(!1)}),[]);return o.createElement("div",{className:"my-1 pt-1.5 pb-3.5 px-2 pr-6 duration-200 rounded-lg hover:bg-slate-100 flex w-full flex-col"},o.createElement("div",{className:"flex w-full justify-between items-center"},o.createElement(y.OL,{className:"flex items-center",activeClassName:"text-amber-500 font-semibold",to:"/blooway/".concat(s,"/private/").concat(u.id)},o.createElement(D.Z,{size:32,style:"shape",value:u.email}),o.createElement("div",{className:"ml-2 text-md font-semibold text-slate-800"},u.username)),o.createElement("div",{className:"flex items-center mt-1 text-xs leading-5 text-slate-400"},o.createElement("span",null,S()(a.createdAt).format("A h:mm")))),o.createElement("p",{onClick:d,className:"break-words whitespace-pre-line ml-10 text-sm"},m),l&&o.createElement("div",{onClick:f,className:"p-3 z-40 bg-slate-800/70  fixed w-full h-full top-0 left-0 flex items-center [&>img]:w-full [&>img]:h-auto [&>img]:shadow-lg [&>img]:shadow-slate-800/80 [&>img]:max-h-full"},m))})),H=n(86658);function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var W=function(e){var t=e.scrollbarRef,n=e.isDataEnd,a=e.isEmpty,r=e.talkSections,l=e.setSize,i=(0,o.useCallback)((function(e){0!==e.scrollTop||n||a||l((function(e){return e+1})).then((function(){var n,a;null===(n=t.current)||void 0===n||n.scrollTop((null===(a=t.current)||void 0===a?void 0:a.getScrollHeight())-e.scrollHeight)}))}),[l,t,n,a]);return o.createElement("div",{id:"talk-list",className:"overflow-x-hidden w-full h-full flex"},o.createElement(H.$B,{autoHide:!0,ref:t,onScrollFrame:i},Object.entries(r).map((function(e){var t,n,a=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=a[0],l=a[1];return o.createElement("section",{className:"section-".concat(r),key:r},o.createElement("div",{id:"talklist-bar",className:"flex items-center overflow-x-hidden justify-center flex-[1] w-full sticky top-[7px] md:top-[12px]"},o.createElement("div",{className:"absolute left-2"}),o.createElement("div",{className:"ml-2 inline-flex items-center rounded-md bg-slate-50 px-2 py-1 text-xs font-medium text-slate-800 ring-1 ring-inset ring-slate-500/10"},r)),l.map((function(e){return o.createElement(_,{key:e.id,data:e})})))}))))},Y=n(65057),V=n(49109);function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var J=function(){var e,t,n,a=(0,i.UO)(),s=a.blooway,u=a.area,m=K(x(s),1)[0],d=(0,c.ZP)("/api/users",r.Z).data,f=(0,c.ZP)("/api/blooways/".concat(s,"/areas"),r.Z).data,b=null==f?void 0:f.find((function(e){return e.name===u})),p=(0,k.ZP)((function(e){return"/api/blooways/".concat(s,"/areas/").concat(u,"/talks?perPage=").concat(20,"&page=").concat(e+1)}),r.Z,{onSuccess:function(e){1===(null==e?void 0:e.length)&&setTimeout((function(){var e;null===(e=D.current)||void 0===e||e.scrollToBottom()}),100)}}),v=p.data,y=p.mutate,h=p.setSize,g=(0,c.ZP)(d?"/api/blooways/".concat(s,"/areas/").concat(u,"/members"):null,r.Z).data,w=K(E(""),3),N=w[0],S=w[1],Z=w[2],j=K((0,o.useState)(!1),2),O=j[0],T=j[1],D=(0,o.useRef)(null),P=K((0,o.useState)(!1),2)[1],z=K((0,o.useState)(!1),2)[1],M=K((0,o.useState)(!1),2),U=M[0],B=M[1],F=0===(null==v||null===(e=v[0])||void 0===e?void 0:e.length),$=F||v&&(null===(t=v[v.length-1])||void 0===t?void 0:t.length)<20,_=(0,o.useCallback)((function(e){if(e.preventDefault(),null!=N&&N.trim()&&v&&b&&d){var t=N;y((function(e){var n;return null==e||e[0].unshift({id:((null===(n=v[0][0])||void 0===n?void 0:n.id)||0)+1,content:t,UserId:d.id,User:d,createdAt:new Date,AreaId:b.id,Area:b}),e}),!1).then((function(){localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString()),Z(""),T(!1),D.current&&D.current.scrollToBottom()})),l.Z.post("/api/blooways/".concat(s,"/areas/").concat(u,"/talks"),{content:t}).catch(console.error)}}),[N,s,u,b,d,v,y,Z]),H=(0,o.useCallback)((function(e){e.Area.name===u&&(e.content.startsWith("uploads\\")||e.content.startsWith("uploads/")||e.content.startsWith("https://bloowaysbucket")||e.UserId!==(null==d?void 0:d.id))&&y((function(t){return null==t||t[0].unshift(e),t}),!1).then((function(){D.current&&(D.current.getScrollHeight()<D.current.getClientHeight()+D.current.getScrollTop()+150?(T(!1),setTimeout((function(){var e;null===(e=D.current)||void 0===e||e.scrollToBottom()}),100)):T(!0))}))}),[u,d,y]);(0,o.useEffect)((function(){return null==m||m.on("message",H),function(){null==m||m.off("message",H)}}),[m,H]),(0,o.useEffect)((function(){localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString())}),[s,u]);var R=(0,o.useCallback)((function(e){e.preventDefault();var t=new FormData;if(e.dataTransfer.items){for(var n=0;n<e.dataTransfer.items.length;n++)if("file"===e.dataTransfer.items[n].kind){var a=e.dataTransfer.items[n].getAsFile();t.append("image",a)}}else for(var r=0;r<e.dataTransfer.files.length;r++)t.append("image",e.dataTransfer.files[r]);l.Z.post("/api/blooways/".concat(s,"/areas/").concat(u,"/images"),t).then((function(){P(!1),localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString())}))}),[s,u]),J=(0,o.useCallback)((function(e){e.preventDefault();for(var t=new FormData,n=0;n<e.target.files.length;n++)t.append("image",e.target.files[n]);l.Z.post("/api/blooways/".concat(s,"/areas/").concat(u,"/images"),t).then((function(){z(!0),localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString()),z(!1)}))}),[s,u]),Q=(0,o.useCallback)((function(){B(!0)}),[]),X=(0,o.useCallback)((function(){var e;T(!1),null===(e=D.current)||void 0===e||e.scrollToBottom()}),[]),ee=(0,o.useCallback)((function(e){e.preventDefault(),P(!0)}),[]),te=(0,o.useCallback)((function(){B(!1)}),[]);if(f&&!b)return o.createElement(i.l_,{to:"/blooway/".concat(s,"/area/전체")});var ne,ae=A(v?(n=[]).concat.apply(n,(ne=v,function(e){if(Array.isArray(e))return G(e)}(ne)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(ne)||q(ne)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).reverse():[]);return o.createElement("div",{id:"area-page",className:"flex flex-col overflow-x-hidden w-full h-full relative ",onDrop:R,onDragOver:ee},o.createElement("div",{id:"mobile-area-pointer",className:"flex items-center w-full justify-between absolute top-2 md:top-3 left-1 text-sm z-10"},o.createElement("div",{className:"flex items-center bg-amber-500 text-white px-1.5 py-0.5 rounded-md "},o.createElement(Y.Z,{className:"w-4 mr-0.5"}),o.createElement("span",{className:"max-w-[65px] md:max-w-[150px] text-ellipsis overflow-hidden"},u)),o.createElement("button",{onClick:Q,type:"button",className:"hover:bg-slate-900 flex items-center bg-slate-800 text-white px-1.5 relative right-2 py-0.5 rounded-md "},o.createElement(I.Z,{className:"w-4 mr-1"}),"멤버")),F&&o.createElement("div",{className:"relative text-sm text-center w-full h-full text-slate-500 flex items-center justify-center"},"내용이 없습니다",o.createElement("br",null),"메시지를 보내서 멤버들과 토크를 시작해보세요!"),O&&o.createElement("button",{type:"button",onClick:X,className:" hover:bg-amber-600 absolute bottom-40 animate-bounce mx-auto z-10 left-0 right-0 px-2 py-0.5 w-[85px] flex items-center justify-center text-sm font-medium bg-amber-500 text-white rounded-md"},o.createElement(V.Z,{className:" w-4 mr-0.5"}),"새 토크"),o.createElement(W,{scrollbarRef:D,isDataEnd:$,isEmpty:F,talkSections:ae,setSize:h}),o.createElement(L,{onSubmitForm:_,talk:N,onChangeTalk:S,placeholder:"".concat(u," 에리어에 토크"),data:g,inPage:"area",onImageUpload:J}),o.createElement(C,{show:U,onCloseModal:te,setShowInviteAreaModal:B}))},Q=n(25265);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ne=function(){var e,t,n,a=(0,i.UO)(),s=a.blooway,u=a.id,m=X(x(s),1)[0],d=(0,c.ZP)("/api/users",r.Z).data,f=(0,c.ZP)("/api/blooways/".concat(s,"/users/").concat(u),r.Z).data,b=(0,k.ZP)((function(e){return"/api/blooways/".concat(s,"/privates/").concat(u,"/talks?perPage=").concat(20,"&page=").concat(e+1)}),r.Z,{onSuccess:function(e){console.log("data",e.length,e),1===(null==e?void 0:e.length)&&setTimeout((function(){var e;null===(e=C.current)||void 0===e||e.scrollToBottom()}),100)}}),p=b.data,v=b.mutate,y=b.setSize,h=X(E(""),3),g=h[0],w=h[1],N=h[2],S=X((0,o.useState)(!1),2),Z=S[0],j=S[1],C=(0,o.useRef)(null),O=X((0,o.useState)(!1),2)[1],I=0===(null==p||null===(e=p[0])||void 0===e?void 0:e.length),T=I||p&&(null===(t=p[p.length-1])||void 0===t?void 0:t.length)<20,D=(0,o.useCallback)((function(e){if(e.preventDefault(),null!=g&&g.trim()&&p){var t=g;v((function(e){var n;return null==e||e[0].unshift({id:((null===(n=p[0][0])||void 0===n?void 0:n.id)||0)+1,content:t,SenderId:d.id,Sender:d,ReceiverId:f.id,Receiver:f,createdAt:new Date}),e}),!1).then((function(){localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString()),N(""),j(!1),C.current&&C.current.scrollToBottom()})),l.Z.post("/api/blooways/".concat(s,"/privates/").concat(u,"/talks"),{content:g}).catch(console.error)}}),[g,s,u,d,f,p,v,N]),P=(0,o.useCallback)((function(e){e.SenderId===Number(u)&&d.id!==Number(u)&&v((function(t){return null==t||t[0].unshift(e),t}),!1).then((function(){C.current&&(C.current.getScrollHeight()<C.current.getClientHeight()+C.current.getScrollTop()+150?(j(!1),setTimeout((function(){var e;null===(e=C.current)||void 0===e||e.scrollToBottom()}),100)):j(!0))}))}),[u,d,v]);(0,o.useEffect)((function(){return null==m||m.on("private",P),function(){null==m||m.off("private",P)}}),[m,P]),(0,o.useEffect)((function(){localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString())}),[s,u]);var z=(0,o.useCallback)((function(e){e.preventDefault();var t=new FormData;if(e.dataTransfer.items){for(var n=0;n<e.dataTransfer.items.length;n++)if("file"===e.dataTransfer.items[n].kind){var a=e.dataTransfer.items[n].getAsFile();t.append("image",a)}}else for(var r=0;r<e.dataTransfer.files.length;r++)t.append("image",e.dataTransfer.files[r]);l.Z.post("/api/blooways/".concat(s,"/privates/").concat(u,"/images"),t).then((function(){O(!1),localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString()),v()}))}),[s,u,v]),M=(0,o.useCallback)((function(e){e.preventDefault();for(var t=new FormData,n=0;n<e.target.files.length;n++)t.append("image",e.target.files[n]);l.Z.post("/api/blooways/".concat(s,"/privates/").concat(u,"/images"),t).then((function(){localStorage.setItem("".concat(s,"-").concat(u),(new Date).getTime().toString()),v()}))}),[s,u,v]),U=(0,o.useCallback)((function(){var e;j(!1),null===(e=C.current)||void 0===e||e.scrollToBottom()}),[]),B=(0,o.useCallback)((function(e){e.preventDefault(),O(!0)}),[]);if(!f||!d)return null;var F,$=A(p?(n=[]).concat.apply(n,(F=p,function(e){if(Array.isArray(e))return te(e)}(F)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(F)||ee(F)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).reverse():[]);return o.createElement("div",{className:"flex flex-col overflow-x-hidden w-full h-full relative ",onDrop:z,onDragOver:B},o.createElement("div",{id:"mobile-private-pointer",className:"flex items-center absolute top-2 md:top-3 left-1 text-sm z-10 rounded-md px-1.5 py-0.5 bg-amber-500 text-white"},o.createElement(Q.Z,{className:"w-4 mr-0.5"}),o.createElement("span",{className:"max-w-[65px] md:max-w-[150px] text-ellipsis overflow-hidden"},f.username)),I&&o.createElement("div",{className:"relative text-sm text-center w-full h-full text-slate-500 flex items-center justify-center"},"내용이 없습니다",o.createElement("br",null),"메시지를 보내서 멤버들과 토크를 시작해보세요!"),Z&&o.createElement("button",{type:"button",onClick:U,className:" hover:bg-amber-600 absolute bottom-40 animate-bounce mx-auto z-10 left-0 right-0 px-2 py-0.5 w-[85px] flex items-center justify-center text-sm font-medium bg-amber-500 text-white rounded-md"},o.createElement(V.Z,{className:" w-4 mr-0.5"}),"새 토크"),o.createElement(W,{scrollbarRef:C,isDataEnd:T,isEmpty:I,talkSections:$,setSize:y}),o.createElement(L,{onSubmitForm:D,talk:g,onChangeTalk:w,placeholder:"".concat(f.username,"에게 프라이빗 토크"),data:[],inPage:"private",onImageUpload:M}))},ae=(n(704),n(45073)),re=n(26141),le=n(66610),oe=n(61452),ie=function(e){var t=e.member,n=e.isOnline,a=(0,i.UO)().blooway,l=(0,i.TH)(),s=(0,c.ZP)("/api/users",r.Z,{dedupingInterval:2e3}).data,u=localStorage.getItem("".concat(a,"-").concat(t.id))||0,m=(0,c.ZP)(s?"/api/blooways/".concat(a,"/privates/").concat(t.id,"/unreads?after=").concat(u):null,r.Z),d=m.data,f=m.mutate;return(0,o.useEffect)((function(){l.pathname==="/blooway/".concat(a,"/private/").concat(t.id)&&f(0)}),[f,l.pathname,a,t]),o.createElement(y.OL,{key:t.id,className:"flex items-center w-full",activeClassName:"text-amber-500 font-semibold",to:"/blooway/".concat(a,"/private/").concat(t.id)},o.createElement("div",{className:"relative"},o.createElement(D.Z,{size:24,shadow:!0,style:"shape",value:t.email}),o.createElement("div",{className:"".concat(n?"bg-emerald-400":"bg-slate-300"," absolute right-0 bottom-0 border border-white w-[9px] h-[9px] rounded-full")})),o.createElement("span",{className:"line-clamp-1 hover:text-amber-500 ml-1.5 overflow-hidden text-ellipsis max-w-[120px]"},t.username),t.id===(null==s?void 0:s.id)&&o.createElement("span",{className:"ml-0.5"},"(나)"),void 0!==d&&d>0&&o.createElement("div",{id:"unread-count",className:"bg-amber-500 text-white ml-1.5 rounded-full w-4 h-4 text-[6px] p-1 flex justify-center items-center"},d))};function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ue=function(){var e=(0,i.UO)().blooway,t=(0,c.ZP)("/api/users",r.Z,{dedupingInterval:2e3}).data,n=(0,c.ZP)(t?"/api/blooways/".concat(e,"/members"):null,r.Z).data,a=ce(x(e),1)[0],l=ce((0,o.useState)([]),2),s=l[0],u=l[1];return(0,o.useEffect)((function(){u([])}),[e]),(0,o.useEffect)((function(){return null==a||a.on("onlineList",(function(e){u(e)})),function(){null==a||a.off("onlineList")}}),[a]),o.createElement(o.Fragment,null,o.createElement("div",null,null==n?void 0:n.map((function(e){var t=s.includes(e.id);return o.createElement(re.p.Panel,{key:e.id,className:"px-4 py-1.5 text-sm"},o.createElement(ie,{member:e,isOnline:t}))}))))},me=function(e){var t=e.area,n=(0,i.UO)().blooway,a=(0,i.TH)(),l=(0,c.ZP)("/api/users",r.Z,{dedupingInterval:2e3}).data,s=localStorage.getItem("".concat(n,"-").concat(t.name))||0,u=(0,c.ZP)(l?"/api/blooways/".concat(n,"/areas/").concat(t.name,"/unreads?after=").concat(s):null,r.Z),m=u.data,d=u.mutate;return(0,o.useEffect)((function(){a.pathname==="/blooway/".concat(n,"/area/").concat(t.name)&&d(0)}),[d,a.pathname,n,t]),o.createElement(y.OL,{key:t.name,className:"w-full flex items-center",activeClassName:"text-amber-500 font-semibold",to:"/blooway/".concat(n,"/area/").concat(t.name)},o.createElement("div",{className:"hover:text-amber-500  flex items-center overflow-hidden text-ellipsis max-w-[120px]"},t.name),void 0!==m&&m>0&&o.createElement("div",{id:"unread-count",className:"bg-amber-500 text-white ml-1.5 rounded-full w-4 h-4 text-[6px] p-1 flex justify-center items-center"},m))},de=function(){var e=(0,i.UO)().blooway,t=(0,c.ZP)("/api/users",r.Z,{dedupingInterval:2e3}).data,n=(0,c.ZP)(t?"/api/blooways/".concat(e,"/areas"):null,r.Z).data;return o.createElement(o.Fragment,null,null==n?void 0:n.map((function(e){return o.createElement(re.p.Panel,{key:e.id,className:"px-4 py-1.5 text-sm"},o.createElement(me,{area:e}))})))},fe=n(33519);function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ve=(0,o.memo)((function(){var e=be((0,o.useState)(!0),2),t=e[0],n=e[1],a=be((0,o.useState)(!1),2),r=a[0],l=a[1],i=(0,o.useCallback)((function(){n(!1)}),[]),c=(0,o.useCallback)((function(){l(!0)}),[]),s=(0,o.useCallback)((function(){l(!1)}),[]);return o.createElement("div",{className:"hidden md:block w-[25%] rounded-md"},o.createElement("div",{className:"overflow-y-auto w-full rounded-2xl bg-white p-2"},o.createElement(re.p,{defaultOpen:!0,as:"div"},(function(e){var t=e.open;return o.createElement(o.Fragment,null,o.createElement(re.p.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium  hover:bg-amber-500 hover:text-white focus:outline-none focus-visible:ring focus-visible:ring-amber-500 focus-visible:ring-opacity-75"},o.createElement("div",{className:"flex items-center"},o.createElement(Y.Z,{className:"w-5"}),o.createElement("span",{className:"ml-1"},"에리어")),o.createElement(le.Z,{className:"".concat(t?"rotate-180 transform":""," h-5 w-5")})),o.createElement(de,null),o.createElement("button",{type:"button",onClick:c,className:"px-4 py-1.5 text-sm"},o.createElement("div",{className:"hover:text-amber-500 flex items-center"},o.createElement(oe.Z,{className:"stroke-2 w-5 mr-0.5"}),"에리어 추가")))})),o.createElement(re.p,{defaultOpen:!0,as:"div",className:"mt-2"},(function(e){var t=e.open;return o.createElement(o.Fragment,null,o.createElement(re.p.Button,{className:"flex w-full justify-between rounded-lg bg-slate-100 px-4 py-2 text-left text-sm font-medium  hover:bg-amber-500 hover:text-white focus:outline-none focus-visible:ring focus-visible:ring-amber-500 focus-visible:ring-opacity-75"},o.createElement("div",{className:"flex items-center"},o.createElement(Q.Z,{className:"w-5"}),o.createElement("span",{className:"ml-1"},"프라이빗 토크")),o.createElement(le.Z,{className:"".concat(t?"rotate-180 transform":""," h-5 w-5")})),o.createElement(ue,null))})),t&&o.createElement("div",{id:"dropdown-cta",className:"p-4 mt-6 rounded-lg bg-indigo-50 "},o.createElement("div",{className:"flex items-center mb-3"},o.createElement("div",{className:"bg-indigo-200 flex items-center text-sm font-semibold mr-2 px-2.5 py-0.5 rounded"},o.createElement(fe.Z,{className:"w-4"}),o.createElement("span",{className:"ml-1"},"Blooways")),o.createElement("button",{type:"button",onClick:i,className:"ml-auto -mx-1.5 -my-1.5 bg-indigo-50  rounded-lg focus:ring-2 p-1 hover:bg-indigo-200 inline-flex h-6 w-6 "},o.createElement("svg",{"aria-hidden":"true",className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},o.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})))),o.createElement("p",{className:"mb-3 text-sm text-indigo-900"},"BlooWays Beta에 오신것을 환영합니다!"),o.createElement(y.rU,{to:"/version-release",className:"text-sm text-indigo-900/60 underline font-medium hover:text-indigo-900/80"},"버전 릴리즈 확인"))),o.createElement(f,{show:r,onCloseModal:s,setShowAddAreaModal:l}))})),ye=n(56221),he=n(85570),ge=n(88324),xe=n(2078);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},we.apply(this,arguments)}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,o,i=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Se=function(){var e,t,n=(0,i.UO)().blooway,d=Ee(x(n),2),b=d[0],h=d[1],g=(0,c.ZP)("/api/users",r.Z),w=g.data,E=g.mutate,N=(0,c.ZP)(w?"/api/blooways/".concat(n,"/areas"):null,r.Z).data,S=(0,c.ZP)(w?"/api/blooways/".concat(n,"/members"):null,r.Z).data,A=Ee((0,o.useState)([]),2),k=A[0],Z=A[1],j=Ee((0,o.useState)(!1),2),C=j[0],O=j[1],T=Ee((0,o.useState)(!1),2),D=T[0],P=T[1],z=Ee((0,o.useState)(!1),2),M=z[0],U=z[1],B=(0,s.cI)(),L=B.register,F=B.handleSubmit,$=B.setValue,_=B.formState.isSubmitting,H=(0,o.useCallback)((function(e){var t=e.bloowayName,n=e.bloowayLink,a=e.description;return t&&t.trim()?n&&n.trim()?t.length>14?u.Am.error("14자 이내의 블루웨이 이름을 입력해주세요.",m.Dd):n.length>14?u.Am.error("14자 이내의 블루웨이 링크를 입력해주세요.",m.Dd):void l.Z.post("/api/blooways",{blooway:t,link:n,description:a}).then((function(){return E(),O(!1),$("bloowayName",""),$("bloowayLink",""),$("description",""),u.Am.success("새 블루웨이가 생성되었습니다",m.Dd)})).catch((function(e){var t;console.dir(e),u.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,m.Dd)})):u.Am.error("키워드 링크를 입력해주세요",m.Dd):u.Am.error("블루웨이 이름을 입력해주세요",m.Dd)}),[E,$]),R=(0,o.useCallback)((function(){O(!0)}),[]),W=(0,o.useCallback)((function(){U(!0)}),[]),V=(0,o.useCallback)((function(){P(!0)}),[]),K=(0,o.useCallback)((function(){O(!1),U(!1),P(!1)}),[]);return(0,o.useEffect)((function(){return null==b||b.on("onlineList",(function(e){Z(e)})),function(){null==b||b.off("onlineList")}}),[b]),(0,o.useEffect)((function(){return function(){h()}}),[h,n]),(0,o.useEffect)((function(){N&&w&&(null==b||b.emit("signin",{id:null==w?void 0:w.id,areas:N.map((function(e){return e.id}))}))}),[b,w,N]),!1===w?o.createElement(i.l_,{to:"/signin"}):o.createElement("div",{id:"blooway-layout",className:"overflow-hidden pt-14 pb-2 h-screen mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 text-slate-800"},o.createElement("div",{className:"pt-2.5 h-9 border-b-amber-500 border-b p-2 justify-between text-base flex items-center"},o.createElement("div",{className:"flex z-20 items-center"},o.createElement(ye.Z,{className:"w-4 mr-1"}),o.createElement(v.Z,{menuTitle:null==w||null===(e=w.Blooways.find((function(e){return e.link===n})))||void 0===e?void 0:e.name,chevron:!0,direction:"left"},o.createElement(ae.v.Item,null,(function(e){var t,a=e.active;return o.createElement("button",{onClick:V,className:"".concat(a?"bg-amber-500 text-white font-semibold":"text-slate-800"," group flex w-full items-center rounded-md px-2 py-2 text-sm")},o.createElement(I.Z,{className:"w-4 mr-1"}),o.createElement("span",{className:"text-ellipsis line-clamp-1 overflow-hidden max-w-[80px]"},null==w||null===(t=w.Blooways.find((function(e){return e.link===n})))||void 0===t?void 0:t.name),"에 멤버 초대")})),o.createElement(ae.v.Item,null,(function(e){var t,a=e.active;return o.createElement("button",{type:"button",onClick:W,className:"".concat(a?"bg-amber-500 text-white font-semibold":"text-slate-800"," group flex w-full items-center rounded-md px-2 py-2 text-sm")},o.createElement(Y.Z,{className:"w-4 mr-1"}),o.createElement("span",{className:"text-ellipsis line-clamp-1 overflow-hidden max-w-[80px]"},null==w||null===(t=w.Blooways.find((function(e){return e.link===n})))||void 0===t?void 0:t.name),"에 에리어 추가")})),o.createElement(ae.v.Item,null,(function(e){var t=e.active;return o.createElement("button",{type:"button",onClick:R,className:"".concat(t?"bg-amber-500 text-white font-semibold":"text-slate-800"," group flex w-full items-center rounded-md px-2 py-2 text-sm")},o.createElement(he.Z,{className:"w-4 mr-1"}),"새 블루웨이 생성")})),o.createElement("div",{className:"h-[1.5px] w-full px-4 my-1.5 bg-slate-200"}),null==w?void 0:w.Blooways.map((function(e){return o.createElement(ae.v.Item,{key:e.link},(function(t){var n=t.active;return o.createElement(y.rU,{to:"/blooway/".concat(e.link,"/area/전체"),className:"".concat(n?"bg-amber-500 text-white":"text-slate-800"," group flex w-full items-center rounded-md px-2 py-2 text-sm")},"all"===e.link?o.createElement(ge.Z,{className:"w-4 mr-1"}):e.link===w.username?o.createElement(xe.Z,{className:"w-4 mr-1"}):o.createElement(ye.Z,{className:"w-4 mr-1"}),e.name)}))}))),(null==w?void 0:w.username)===n&&o.createElement("span",{className:"ml-2 inline-flex items-center rounded-md bg-slate-50 px-2 py-1 text-xs font-medium text-slate-800 ring-1 ring-inset ring-slate-500/10"},"Me"),"all"===n&&o.createElement("span",{className:"ml-2 inline-flex items-center rounded-md bg-slate-50 px-2 py-1 text-xs font-medium text-slate-800 ring-1 ring-inset ring-slate-500/10"},"Base"),o.createElement("span",{className:"hidden md:inline text-xs ml-3 text-slate-500"},null==w||null===(t=w.Blooways.find((function(e){return e.link===n})))||void 0===t?void 0:t.description)),o.createElement("div",{className:"md:flex  hidden items-center text-slate-500 text-sm font- font-normal"},null==w?void 0:w.email),o.createElement("div",{className:"flex z-20 md:hidden items-center gap-2.5"},o.createElement(v.Z,{menuTitle:"에리어",chevron:!0,direction:"right"},null==N?void 0:N.map((function(e){return o.createElement(ae.v.Item,{key:e.id},o.createElement("button",{className:" group flex w-full items-center rounded-md px-2 py-2 text-sm"},o.createElement(me,{area:e})))}))),o.createElement(v.Z,{menuTitle:"프라이빗 토크",chevron:!0,direction:"right"},null==S?void 0:S.map((function(e){var t=k.includes(e.id);return o.createElement(ae.v.Item,{key:e.id},o.createElement("button",{className:" group flex w-full items-center rounded-md px-2 py-2 text-sm"},o.createElement(ie,{member:e,isOnline:t})))}))))),o.createElement("div",{id:"blooway-side-splitter",className:"flex w-full h-full"},o.createElement(ve,null),o.createElement("div",{className:"flex w-full md:w-[75%]"},o.createElement(i.rs,null,o.createElement(i.AW,{path:"/blooway/:blooway/area/:area",component:J}),o.createElement(i.AW,{path:"/blooway/:blooway/private/:id",component:ne})))),o.createElement(a.Z,{modalType:0,modalTitle:"새로운 블루웨이 생성하기",show:C,onCloseModal:K},o.createElement("form",{id:"create-blooway-modal",className:"w-full",onSubmit:F(H)},o.createElement("div",{className:"w-full my-4"},o.createElement("div",null,o.createElement("span",null,"블루웨이 이름"),o.createElement("input",we({id:"bloowayName",type:"text",className:"mt-2 relative block w-full appearance-none rounded-md  border border-slate-300 px-3 py-2 text-slate-800 placeholder-slate-400 focus:z-10 focus:border-amber-500 focus:outline-none focus:ring-amber-500 sm:text-sm",placeholder:"2-14자 이내로 입력해주세요"},L("bloowayName",{minLength:2,onChange:function(e){return $("bloowayLink",e.target.value)}})))),o.createElement("div",{className:"mt-2"},o.createElement("span",null,"키워드 링크"),o.createElement("input",we({id:"bloowayLink",type:"text",className:"mt-2 relative block w-full appearance-none rounded-md  border border-slate-300 px-3 py-2 text-slate-800 placeholder-slate-400 focus:z-10 focus:border-amber-500 focus:outline-none focus:ring-amber-500 sm:text-sm",placeholder:"링크에 표시할 키워드입니다"},L("bloowayLink",{minLength:2})))),o.createElement("div",{className:"mt-2"},o.createElement("span",null,"블루웨이 정보"),o.createElement("input",we({id:"description",type:"text",className:"mt-2 relative block w-full appearance-none rounded-md  border border-slate-300 px-3 py-2 text-slate-800 placeholder-slate-400 focus:z-10 focus:border-amber-500 focus:outline-none focus:ring-amber-500 sm:text-sm",placeholder:"누구나 환영해요"},L("description",{}))))),o.createElement("div",{className:"flex justify-center"},o.createElement("button",{disabled:_,type:"submit",className:"inline-flex justify-center rounded-md border border-transparent bg-amber-500 px-4 py-2 text-sm font-medium text-white hover:bg-amber-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-amber-500 focus-visible:ring-offset-2"},"생성하기")))),o.createElement(f,{show:M,onCloseModal:K,setShowAddAreaModal:U}),o.createElement(p,{show:D,onCloseModal:K,setShowInviteBloowayModal:P}),o.createElement(u.Ix,{position:"bottom-center"}))}}}]);